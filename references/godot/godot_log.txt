Godot Engine v4.5.1.stable.official.f62fdbde1 - https://godotengine.org
OpenGL API 4.1 Metal - 90.5 - Compatibility - Using Device: Apple - Apple M1 Pro

[Debugger] No --model specified. Waiting for manual interaction or command.
[Debugger] Loading: res://reference/MuMain/src/bin/Data/Object1/Curtain01.bmd (NoSkin: false, NoTexture: false)
[Skeleton Builder] Skeleton bone count: 7
  [Mesh Builder] Direct loading MU texture: res://reference/MuMain/src/bin/Data/Object1/badge_01.OZJ
--Main Shader--
    1 | shader_type spatial;
    2 | render_mode blend_mix, depth_draw_opaque, cull_disabled, diffuse_lambert, specular_schlick_ggx;
    3 | 
    4 | uniform sampler2D albedo_texture : source_color, filter_linear_mipmap, repeat_enable;
    5 | uniform vec4 albedo_color : source_color = vec4(1.0);
    6 | uniform float alpha_scissor_threshold : hint_range(0.0, 1.0) = 0.5;
    7 | 
    8 | 
    9 | uniform bool use_chrome = false;
   10 | uniform bool use_wave = false;
   11 | uniform bool use_bright = false;
   12 | uniform bool use_pulsing = false;
   13 | 
   14 | uniform float wave_stiffness_top = 0.0;
   15 | uniform float wave_stiffness_center = 0.0;
   16 | 
   17 | 
   18 | uniform float bobbing_amplitude = 0.0;
   19 | uniform float bobbing_speed = 0.002;
   20 | 
   21 | 
   22 | uniform float scroll_speed_u = 0.0;
   23 | uniform float scroll_speed_v = 0.0;
   24 | uniform float pulsing_speed = 4.0;
   25 | uniform float time_offset = 0.0;
   26 | 
   27 | varying vec3 v_normal_view;
   28 | varying float v_vertex_id;
   29 | 
   30 | void vertex() {
   31 |  v_normal_view = (VIEW_MATRIX * vec4(NORMAL, 0.0)).xyz;
   32 |  v_vertex_id = float(VERTEX_ID);
   33 |  
   34 |  if (use_wave) {
   35 |  
   36 |  
   37 |  float world_time = (TIME + time_offset) * 1000.0;
   38 |  float wave = sin((world_time + v_vertex_id * 931.0) * 0.007) * 0.28;
   39 |  
   40 |  float atten_y = 1.0 - (wave_stiffness_top * (1.0 - UV.y));
   41 |  float atten_x = 1.0 - (wave_stiffness_center * (1.0 - abs(UV.x - 0.5) * 2.0));
   42 |  
   43 |  VERTEX += NORMAL * wave * atten_y * atten_x;
   44 |  }
   45 |  
   46 |  if (bobbing_amplitude > 0.0) {
   47 |  float world_time = (TIME + time_offset) * 1000.0;
   48 |  
   49 |  VERTEX.y += bobbing_amplitude * sin((world_time + v_vertex_id * 1237.0) * bobbing_speed);
   50 |  }
   51 | }
   52 | 
   53 | void fragment() {
   54 |  vec2 base_uv = UV;
   55 |  float cur_time = TIME + time_offset;
   56 |  
   57 |  
E  58->  if (use_sawtooth) {
   59 |  
   60 |  base_uv.x -= fract(cur_time * scroll_speed_u);
   61 |  base_uv.y -= fract(cur_time * scroll_speed_v);
   62 |  } else {
   63 |  
   64 |  base_uv.x += cur_time * scroll_speed_u;
   65 |  base_uv.y += cur_time * scroll_speed_v;
   66 |  }
   67 |  
   68 |  vec2 chrome_uv = base_uv;
   69 |  if (use_chrome) {
   70 |  
   71 |  float wave = mod(cur_time * 1000.0, 10000.0) * 0.0001;
   72 |  chrome_uv.x = v_normal_view.y * 0.5 + wave;
   73 |  chrome_uv.y = v_normal_view.z * 0.5 + wave * 2.0;
   74 |  }
   75 |  
   76 |  vec4 tex_color = texture(albedo_texture, use_chrome ? chrome_uv : base_uv);
   77 |  
   78 |  vec3 color = tex_color.rgb * albedo_color.rgb;
   79 |  float alpha = tex_color.a * albedo_color.a;
   80 |  
   81 |  if (use_pulsing) {
   82 |  
   83 |  float pulse = sin(cur_time * pulsing_speed) * 0.3 + 0.7;
   84 |  if (use_jitter) {
   85 |  
   86 |  
   87 |  float tick_time = floor(cur_time * 30.0);
   88 |  float jitter = fract(sin(dot(vec2(tick_time), vec2(12.9898, 78.233))) * 43758.5453);
   89 |  pulse = mix(0.4, 0.8, jitter);
   90 |  }
   91 |  color *= pulse;
   92 |  }
   93 |  
   94 |  ALBEDO = color;
   95 |  ALPHA = alpha;
   96 |  
   97 |  if (use_bright) {
   98 |  
   99 |  EMISSION = ALBEDO * 0.8; 
  100 |  }
  101 |  
  102 |  if (ALPHA < alpha_scissor_threshold) {
  103 |  discard;
  104 |  }
  105 | }
SHADER ERROR: Unknown identifier in expression: 'use_sawtooth'.
          at: (null) (:58)
          GDScript backtrace (most recent call first):
              [0] create_material (res://addons/mu_tools/rendering/material_factory.gd:19)
              [1] build_mesh_v2 (res://addons/mu_tools/rendering/bmd_mesh_builder.gd:373)
              [2] create_mesh_instance_v2 (res://addons/mu_tools/rendering/bmd_mesh_builder.gd:242)
              [3] _load_bmd (res://scenes/model_viewer.gd:520)
              [4] load_model (res://scenes/model_viewer.gd:476)
              [5] _on_model_selected (res://scenes/model_viewer.gd:172)
ERROR: Shader compilation failed.
   at: set_code (drivers/gles3/storage/material_storage.cpp:3052)
   GDScript backtrace (most recent call first):
       [0] create_material (res://addons/mu_tools/rendering/material_factory.gd:19)
       [1] build_mesh_v2 (res://addons/mu_tools/rendering/bmd_mesh_builder.gd:373)
       [2] create_mesh_instance_v2 (res://addons/mu_tools/rendering/bmd_mesh_builder.gd:242)
       [3] _load_bmd (res://scenes/model_viewer.gd:520)
       [4] load_model (res://scenes/model_viewer.gd:476)
       [5] _on_model_selected (res://scenes/model_viewer.gd:172)
  [Mesh Builder] Direct loading MU texture: res://reference/MuMain/src/bin/Data/Object1/badge_02.OZT
ERROR: 1 RID allocations of type 'N17RendererSceneCull8InstanceE' were leaked at exit.
WARNING: ObjectDB instances leaked at exit (run with --verbose for details).
     at: cleanup (core/object/object.cpp:2514)
